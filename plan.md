[AGGROFILTER_PLAN.md]

어그로필터 (AggroFilter) 웹앱 개발 기획서 (v3.1 - 마스터 플랜, 2025-01-23)

1. 프로젝트 개요

서비스명: 어그로필터 (AggroFilter)

목적: 유튜브 콘텐츠의 정확성, 어그로성, 신뢰도를 AI(Gemini/GPT)로 분석하여 사용자에게 제공하는 PWA(웹앱).

핵심 과제: 사용자의 시간 낭비 방지, 인지 피로 감소, 허위 정보로 인한 피해 예방.

수익 모델: 100% 무료 (광고 기반). 유료 결제 로직 없음.

지원 언어: 초기 3개국어 (한국어, 영어, 일본어) 런칭 목표.

1.1. 용어 헌법 (Terminology Constitution) - [v3.0 신설]

본 프로젝트에서는 일관된 용어 사용을 위해 다음 규칙을 준수한다:

[필수] "분석수" 용어 통일

금지: "조회수(Views)" 용어 사용 금지.

필수: 모든 영상/채널 분석 횟수 지표는 **"분석수"**로 통일.

UI 표시: "분석수"

DB 필드명: analysis_count

이유: 유튜브의 "조회수(views)"와 혼동을 방지하고, AggroFilter의 고유한 가치(AI 분석 서비스)를 강조하기 위함.

1.2. 다국어(i18n) 전략 (하이브리드) - [확정]

[A. 정적 UI 텍스트 (버튼, 메뉴 등)]

관리: i18n.json (Key-Value) 파일로 관리.

설계: 처음부터 다국어 아키텍처 적용 (UI 텍스트 하드코딩 금지).

MVP 런칭: **ko.json (한국어 1개)**로 런칭. (이후 en.json, ja.json 순차 확장)

[B. 동적 데이터 (주제명)]

관리: [스키마 v2.0] topic_translations 테이블에서 **'행(Row)'**으로 관리.

설계: i18n.json 파일에 900+개의 주제명을 넣는 것은 불가능.

1.3. 핵심 UX 아키텍처 (페이지 계층 & 내비게이션) - [v3.0 업데이트]

목적: v0(UI/UX) 및 WS-Agent(코딩)가 따라야 할 명확한 페이지 흐름과 위계질서를 정의.

[페이지-1순위] 분석 결과 페이지 (/result)

역할: 앱의 '핵심 결과물' (Core Detail Page).

헌법 (중요): 이 페이지는 메인 메뉴(GNB/LNB)에서 1클릭으로 접근하는 '1차 액션' 페이지가 아님. '2차 액션'에서만 노출됨.

핵심 진입 경로 (6가지) & 스마트 백(Smart Back):

[Smart Back 로직]: 진입 시 URL 파라미터(?from=mypage&tab=videos 등)를 받아, 뒤로 가기 클릭 시 브라우저 히스토리가 아닌 '지정된 탭'으로 정확히 복귀해야 함.

신규 URL 분석 완료 직후 (2.3)

마이페이지 > '분석 영상' 탭 > '영상' 클릭

마이페이지 > '분석 채널' 탭 > (아코디언) > '영상' 클릭

분석 Plaza > '영상 트렌드' 탭 > '영상' 클릭

분석 Plaza > '채널 트렌드' 탭 > (아코디언) > '영상' 클릭

랭킹 페이지 > 채널 상세 > '영상' 클릭

[페이지-2순위] 채널 랭킹 페이지 (/ranking)

역할: 주제/국가별 '채널 순위표' (Daughter Page).

핵심 진입 경로 (Shortcuts):

[페이지-1순위]의 '채널 점수 박스' 클릭

마이페이지 > '분석 채널' 탭 > 채널명 '길게 누르기(Long Press)'

분석 Plaza > '채널 트렌드' 탭 > 채널명 '길게 누르기(Long Press)'

[페이지-3순위] 분석 Plaza 페이지 (/plaza) - [v3.0 신규]

역할: 실시간으로 분석된 인기 영상과 채널을 모아서 보여주는 커뮤니티 공간.

위치: 헤더 메뉴 "분석 Plaza"와 연결.

주요 섹션:

영상 트렌드 탭: 원데이/주간 핫이슈 3개 영상을 분석수/신뢰도/어그로 기준으로 필터링. (클릭 시 /result 이동)

채널 트렌드 탭: 원데이/주간 핫이슈 3개 채널 표시. (클릭 시 /ranking 이동)

전체 분석 채널 섹션: 순위/채널명/주차/영상수/분석수/신뢰도 테이블 제공. (드롭다운 필터 지원)

Smart Back: Plaza에서 이동 시 ?from=plaza&tab=videos 파라미터 전달 필수.

[레거시] 실시간 Best 페이지 (/real-time-best)

상태: 현재 유지 (분석 Plaza가 기능 대체 중).

2. 핵심 기능 정의 (MVP 기준)

2.1. 사용자 및 가입 (User & Auth) - [v2.9 개방형 로직]

핵심 전략 (Flow): '완전 개방형(Fully Open)' 시스템.

분석(Analysis): 로그인 없이 누구나(Guest) 즉시 분석 가능. (진입 장벽 0)

상호작용(Interaction): 댓글, 좋아요 등 '책임'이 따르는 행동 시에만 로그인을 요구.

로그인 시점 (Trigger):

[Primary] '상호작용 시도': 분석 결과에 댓글 작성, 좋아요/싫어요 클릭 시 로그인 모달 팝업.

[Secondary] '마이페이지 저장': 게스트 상태로 분석한 기록을 '내 보관함'에 영구 저장하려 할 때.

인증 (Modal UI):

'로그인 모달' 내에서 이메일 주소를 입력.

해당 이메일로 **인증 코드(6자리)**를 발송.

사용자가 모달 내에서 6자리 인증 코드를 입력하면 로그인 완료 (페이지 새로고침 없음).

(SNS 로그인, 휴대폰 인증 삭제)

2.2. PWA 및 북마클릿 (Installation) - [v2.2 시점 변경]

설치 유도 시점: 2.1의 이메일 인증(로그인)이 완료된 직후, 온보딩(Onboarding) 과정으로 PWA/북마클릿 설치를 유도함. (앱 가치 경험 -> 로그인 -> 설치 순서)

모바일 (PWA): 홈 화면에 앱 아이콘 설치 유도.

PC (Bookmarklet): 브라우저에 북마클릿 설치 유도.

2.3. 콘텐츠 분석 (Analysis) - [국가 로직 추가]

입력: 모바일(공유 메뉴 > 앱 아이콘) 또는 PC(북마클릿)를 통해 유튜브 URL 자동 입력.

메타데이터 수집: [중요] 백엔드는 URL을 받는 즉시 유튜브 API를 통해 다음 2가지 정보를 필수로 가져와야 함.

youtube_video_id 및 title (중복 검사, 분석용)

channel_country (채널의 국가 코드, 예: 'KR', 'US') (랭킹 분류용)

중복 검사: youtube_video_id와 title 기준으로 중복 분석 방지.

AI 분석 (Gemini/GPT): (세부 로직은 '3. AI 분석 핵심 로직' 참조)

자막 및 메타데이터(제목, 썸일)를 AI에 전달.

결과: 정확성(%), 어그로성(%), 신뢰도(점수), 자막 요약, 평가 이유, 추천 제목(어그로성 30% 이상 시) 반환.

결과 표시 (UI):

분석 결과는 아코디언(Accordion) UI로 "자막 전문" / "자막 요약" / "분석 보고서" 탭으로 제공.

신호등 스코어: 신뢰도 점수에 따라 시각적 캐릭터/컬러(초록/노랑/빨강) 표시.

2.4. 주제 분류 및 랭킹 (Topic & Ranking) - [스키마 v2.0 적용]

A. '주제 마스터 리스트' (DB)

초기 데이터: 개발자가 수동으로 관리하는 수백 개의 한국어 표준 주제 리스트.

B. AI의 1차 주제 생성

AI는 영상의 주제를 1~2개의 한글 단어 조합 (예: '미국 금리')으로 생성.

C. 주제 표준화 (벡터 DB 협업 로직)

벡터 변환: AI가 생성한 주제를 벡터로 변환.

유사도 판정 (Threshold: 65%):

[Case 1] 65% 이상 유사: 기존 주제(topic_id: 123)로 표준화(편입).

[Case 2] 65% 미만 유사: 신규 주제로 추가(topic_id: 456) 및 벡터 저장.

D. 채널 랭킹 - [국가별 로직 확정]

데이터 (랭킹 키): (topic_id + country) 조합을 고유 키로 사용.

UI (랭킹 표시):

검색/필터: 주제 검색(자동완성) 및 관심 주제 드롭다운 제공.

[v3.0 UI 규칙]: 랭킹 페이지(/ranking) 헤더에 '뒤로 가기(Back Arrow)' 버튼 필수 포함.

[v3.0 UI 규칙]: 테이블의 **"신뢰도 점수"**는 whitespace-nowrap 클래스를 적용하여 모바일에서도 한 줄 표시 보장.

E. 주제명 JIT 번역 로직

topics_master의 한국어 주제명을 사용자 언어(mn 등)로 실시간 번역 및 topic_translations 테이블에 캐싱.

2.5. 마이 페이지 (My Page) - [v3.0 구조]

구조: 탭(Tabs) 구조 적용.

Tab 1: 분석 영상 (사용자가 분석한 영상 리스트)

Tab 2: 분석 채널 (사용자가 분석한 채널 리스트)

기능:

아코디언 UI: 채널 클릭 시 하위 영상 목록 펼침.

롱 프레스: 채널명 길게 누르면 **'상세 랭킹 페이지'**로 이동.

2.6. 수익 모델 (Monetization) - [확정]

무료 제공: 모든 AI 분석 기능은 사용자에게 무료로 제공.

광고 수익: 배너 광고(예: Google AdSense).

2.7. 알림 시스템 (Notification) - [확정]

알림 방식: 이메일 기반 알림.

알림 내용: 구독 채널의 '비율 순위'가 ±10%P 이상 변동 시 발송.

2.8. 도움말 (Tooltips) - [v2.8 유지]

핵심 툴팁 대상: 마이페이지/Plaza 등에서 채널명을 '길게 누르세요(Long Press)' 안내.

2.9. 댓글 및 상호작용 (Comments & Interaction) - [v2.9 부활]

기능: 댓글, 대댓글, 좋아요/싫어요.

로그인 연동: '손님(Guest)'이 시도 시 로그인 모달 트리거.

3. AI 분석 핵심 로직 (AI Prompt Summary)

역할: 유튜브 영상(제목, 썸네일, 자막)을 **멀티모달(Multimodal)**로 분석.

모델: Gemini 2.5 Flash 또는 GPT-4o.

입력: 텍스트(자막, 제목) + 이미지(썸네일 URL).

산출물: 주제(1차), 정확성/어그로성 점수, 신뢰도 점수, 자막 요약, 총평, 추천 제목.

4. 데이터베이스 핵심 스키마 (DB Schema) - [v3.0 필드명 업데이트]

topics_master: topic_id, name_ko, vector_value.

topic_translations: id, topic_id, language_code, name.

video: channel_country 필드 필수, analysis_count (분석수).

channel: analysis_count (총 분석수).

ranking: (topic_id, country, channel_id) 복합 키 사용.

comments: video_id, user_id, content, likes_count.

5. 네이밍 헌법 (Naming Convention)

[중요] VIBE_CODING_NAMING_RULES_v2.md 규칙 준수.

6. 관리자 및 운영 (Admin & Operations) - [v2.10 유지]

목적: 초기 데이터 부족(Cold Start) 해결.

전략: '2단계 수공업 라인'.

무료 수집 (YouTube API): [뉴스/정치 TOP 50] 등 대량 수집.

인간 필터: 관리자가 육안 선별.

AI 가공: 선별된 영상만 분석하여 DB 적재.

7. 마케팅 및 초기 확산 전략 (Marketing & Growth) - [v2.11 유지]

전략 1 (Cold Start): 오픈 첫날 100개 이상 인기 영상 분석 데이터 확보.

전략 2 (Viral): 결과 공유하기 (신호등 캐릭터 OG Image).

전략 3 (SEO): 모든 결과 페이지 공개(Public) 및 sitemap 생성.

전략 4 (Guerrilla): 이슈 발생 시 커뮤니티에 팩트체크 결과 게시.

8. UI/UX 개선 이력 (UI/UX Enhancement Log) - [v3.1 추가, 2025-01-23]

이 섹션은 기획서의 핵심 기능 정의와는 별도로, 실제 구현 과정에서 적용된 **디자인 시스템 최적화 및 사용자 경험 개선 사항**을 기록합니다.

### 8.1. 채널 리포트 페이지 최적화 (/channel/[id])

**Before:**
- 카드 내부 패딩이 과도하여(`p-6`) 모바일 화면에서 답답한 느낌
- 채널 종합 리포트 박스가 화면의 절반 이상을 차지
- 프로필 이미지와 텍스트 사이 여백이 비효율적
- 통계 박스와 리스트 간 간격이 지나치게 넓음

**After:**
- 전체 패딩을 `p-2.5`로 축소하여 콤팩트한 레이아웃 구현
- 프로필 영역과 통계 박스 간격 최소화(`mb-2`)
- 프로필 이미지 크기 축소(56px → 44px)
- 통계 박스 내부 여백 슬림화(`py-1`)
- 결과: 정보 밀도 향상, 눈의 피로도 감소, 한눈에 정보 파악 가능

**핵심 원칙:**
- 사용자가 요청한 "4~5mm 수준의 여백"을 구현하여 모바일 최적화 완성
- 공백 낭비 제거, 시각적 효율성 극대화

### 8.2. 분석 Plaza 페이지 대대적 리뉴얼 (/plaza)

#### A. 3D/입체감 디자인 시스템 적용

**Before:**
- 납작한 주황색 테두리와 단조로운 카드 디자인
- 버튼 스타일이 페이지마다 불일치(통일성 부족)
- 평면적인 느낌으로 시각적 위계가 약함

**After:**
- **핫이슈 박스**: 흰색 배경 + 깊은 그림자(`shadow-[0_8px_30px_rgb(0,0,0,0.12)]`) + 상단 그라데이션 바 적용
- **리스트 카드**: hover 시 살짝 떠오르는 효과(`hover:-translate-y-1`) + 그림자 전환 애니메이션
- **순위 배지**: 그라데이션 + 링 스타일로 입체감 강화
- **결과**: PC/모바일 모두에서 고급스럽고 터치감 있는 UI 완성

#### B. 버튼 스타일 통일성 확보

**Before:**
- 영상 트렌드 / 채널 트렌드 탭: 각각 다른 스타일
- 서브 탭(분석수/신뢰도/어그로): 일관성 없는 디자인

**After:**
- 마이페이지(My Page)의 2-set 버튼 스타일(Slate-900 캡슐형)을 Plaza에도 적용
- 서브 탭: 둥근 모서리 + 깔끔한 그림자 + 링 효과로 모던하게 통일
- **결과**: 앱 전체의 디자인 일관성 확보

#### C. 컬러 로직 최적화 (직관성 강화)

**Before:**
- 신뢰도 WORST / 어그로 TOP 점수가 빨간색인데, 버튼은 초록색으로 표시되는 등 색상 혼란
- 사용자가 긍정/부정 지표를 직관적으로 인지하기 어려움

**After:**
- **신뢰도 TOP 3**: 버튼 텍스트 초록색 → 높은 신뢰도는 긍정
- **신뢰도 WORST 3**: 버튼 텍스트 빨간색 → 낮은 신뢰도는 경고
- **어그로 TOP 3**: 버튼 빨간색/핑크 → 높은 어그로는 경고
- **어그로 LOWEST 3**: 버튼 초록색 → 낮은 어그로는 긍정
- **점수 색상**: 높은 어그로(80+) → 빨간색, 낮은 어그로 → 초록색
- **결과**: 색상만으로도 의미를 즉시 파악 가능한 직관적 UX 구현

#### D. 공간 효율성 극대화

**Before:**
- '원데이 핫이슈 3' 섹션이 모바일 화면을 가득 채워 스크롤 피로 증가
- 카드 간 과도한 여백(`space-y-4`, `mb-6` 등)

**After:**
- 전체 패딩 축소(`p-6` → `p-3`)
- 헤더/탭 여백 최소화(`mb-6` → `mb-3`)
- 리스트 아이템 간격 축소(`space-y-3` → `space-y-2`)
- 카드 내부 패딩 슬림화(`p-4` → `p-2.5`)
- **결과**: 모바일에서 한 화면에 더 많은 정보 표시, 눈의 피로도 감소

#### E. 네비게이션 정확도 개선

**Before:**
- 영상 제목 클릭 시 잘못된 외부 URL로 이동
- 채널명 클릭 시 하드코딩된 ID로 연결

**After:**
- **영상 트렌드 탭**: 모든 영상 제목 → `/result?id={videoId}` (영상 분석 결과 페이지)
- **채널 트렌드 탭**: 모든 채널명 → `/channel/{channelId}` (채널 리포트 페이지)
- 각 아이템의 실제 ID를 사용하여 정확한 네비게이션 보장

#### F. 기술적 안정성 향상

**Before:**
- Hydration Mismatch 에러 발생(`Math.random()` 사용으로 서버/클라이언트 불일치)
- CSS 변수 누락으로 인한 런타임 에러

**After:**
- `Math.random()` 제거 → 인덱스 기반 결정론적 데이터(Deterministic Data) 생성
- `globals.css` 파일 생성 및 Tailwind CSS v4 설정 완료
- **결과**: 에러 없는 안정적인 렌더링 보장

### 8.3. 타이포그래피 시스템 구축

**Before:**
- 일관성 없는 폰트 스타일(숫자, 제목, 본문 등)
- 가독성 저하 및 정보 계층 불분명

**After:**
- **숫자 데이터**: `tabular-nums` + `tracking-tight` → 정갈한 정렬
- **날짜**: `font-mono` 스타일 → 정보성 텍스트 강조
- **영상/채널 제목**: `font-semibold` → 주목도 향상
- **전체 텍스트**: 자간 미세 조정(`tracking-tight`) → 모던하고 깔끔한 느낌
- **적용 범위**: 전체 분석 영상 리스트, 전체 분석 채널 리스트
- **결과**: 앱 전체에서 일관된 가독성과 시각적 계층 확립

### 8.4. 채널 트렌드 섹션 스타일 통일

**Before:**
- '주간 핫채널 3' 박스가 평면적인 보라색 테두리 디자인
- 영상 트렌드와 스타일 불일치

**After:**
- 영상 트렌드와 동일한 3D/그림자/그라데이션 스타일 적용
- 채널 카드에도 hover 효과 추가
- 컬러 로직(신뢰도 TOP/WORST) 동일하게 적용
- **결과**: Plaza 페이지 내 모든 섹션의 디자인 일관성 확보

### 8.5. 종합 개선 효과

**사용자 경험(UX):**
- 공간 효율성: 모바일 스크롤 피로도 30% 이상 감소 추정
- 정보 밀도: 동일한 화면 크기에 더 많은 정보 표시 가능
- 직관성: 색상 로직 통일로 의미 파악 속도 향상

**디자인 시스템:**
- 통일성: 버튼, 카드, 타이포그래피 전체 일관성 확보
- 입체감: 그림자/호버 효과로 고급스러운 UI 완성
- 반응성: 모바일/PC 모두에서 최적화된 레이아웃 구현

**기술적 완성도:**
- 안정성: Hydration 에러 해결, CSS 설정 완료
- 유지보수성: 명확한 네이밍과 구조화된 컴포넌트
- 확장성: Tailwind v4 기반의 확장 가능한 디자인 시스템

---

**[v3.1 업데이트 완료일: 2025-01-23]**
