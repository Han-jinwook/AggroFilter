# 프로젝트 진행 상황 및 계획

## ✅ 완료된 작업 (2026-01-08)

### 1. 청소년 분석 서비스 고도화
- **프롬프트 전달 방식 개선**:
  - URL 길이 제한 문제 해결을 위해 **하이브리드 방식** 적용.
  - 내용이 길 경우(자막 전문 포함) 자동으로 **클립보드에 복사**하고 ChatGPT를 실행하도록 변경.
- **프롬프트 내용 강화**:
  - [자막 전문] 섹션을 추가하여 AI가 전체 맥락을 파악하고 교육할 수 있도록 개선.

### 2. 어그로성 평가 로직 전면 개편 (Gemini v4.3)
- **문제점 해결**: 정확도가 높으면 어그로 점수가 낮아지는 '기계적 감경' 문제 해결.
- **주요 변경 사항**:
  - **상대적 평가 도입**: '팩트의 무게'와 '워딩의 무게' 사이의 **괴리감(Gap)**을 평가.
  - **평가 독립성**: 내용이 정확해도 워딩이 과장되면 고득점 부여.
  - **Fact Cap(상한선) 적용**: 팩트가 기반된 영상은 아무리 과장되어도 **최대 90점**으로 제한 (100점은 허위사실 전용).
  - **구간 제한 해제**: 인위적인 점수 가이드를 삭제하고 AI의 자율 평가 비중 확대.

### 3. 멀티모달(썸네일+텍스트) 분석 기능 추가
- **기능 구현 (기술적 특이사항)**:
  - **Fetch & Send 방식 채택**: Gemini API는 보안상 외부 URL 직접 입력을 지원하지 않음. 따라서 서버에서 썸네일을 다운로드(Fetch)하여 Base64 형태로 AI에 전달하도록 구현.
  - **비용 효율성 확보**: 전송 방식 변경에 따른 추가 과금 없음(장당 토큰 과금). GPT-4o 대비 60배 저렴한 Flash 모델 유지로 운영 비용 최소화.
- **분석 기준 강화**:
  - **시각적 어그로 평가**: 붉은색 텍스트, 과한 표정 합성, 자극적 문구 등 시각적 요소를 '괴리감(Gap)' 평가에 포함.
  - **Gap 분석 확장**: [팩트] vs [제목 + 썸네일] 간의 괴리감을 종합적으로 판단하도록 프롬프트 고도화.

### 4. 긴급 모델 교체 및 재난 이슈 분류 강화 (2026-01-10)
- **AI 모델 전면 교체**: 
  - 기존 `gemini-1.5-pro`의 404 오류 및 타임아웃 문제 해결을 위해 최신 **`gemini-2.5-flash`** (Primary) 및 **`gemini-2.0-flash-lite`** (Fallback) 체제로 전환.
- **주제 분류 정확도 개선 (재난 이슈)**:
  - **문제점**: 지진/쓰나미 등 명백한 재난 영상을 AI가 '지구 과학'이나 '환경 문제'로 오분류하는 현상 발생.
  - **해결책**: 
    1. 프롬프트에 '지진은 환경 문제가 아님'을 명시하고 '재난 이슈' 우선순위 강화.
    2. **Code-Level Fail-safe 도입**: AI가 오분류하더라도 제목/자막에 '지진', '대피', '쓰나미' 등 재난 키워드가 포함되면 강제로 **"재난 이슈"**로 보정하는 이중 안전장치 구축.
- **시스템 안정성 확보**:
  - 응답 JSON 파싱 로직 강화 (마크다운/공백 제거).
  - 주제 표준화 단계 타임아웃 시에도 분석 결과는 보존하도록 수정.

## 📅 향후 계획
- [ ] 변경된 평가 로직 모니터링 및 미세 조정
- [ ] 랭킹 페이지 필터링 UX 개선

