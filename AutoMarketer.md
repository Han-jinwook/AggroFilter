⚙️ 기획서: 어그로필터 오토마케터 (AutoMarketer)
Project: AggroFilter Independent Local System (Aggro Marketing Bot)
Target: Back-end / Node.js Developer (Windsurfer)
Version: Final Merged 6.2 (Tech Stack & Implementation Order Finalized)
1. 개요 및 시스템 분리 배경 (Overview)
이 시스템은 어그로필터 메인 서비스와 철저히 분리되어, 대표님의 로컬 PC(또는 소형 서버)에서 단독으로 돌아가는 **'자동화 봇(Bot) 및 제어판'**입니다.
1.1 아키텍처 구조 (Architecture)
위치: 메인 프로젝트 최상단(Root) 하위에 독립 폴더(aggro-marketing-bot)로 생성. (Node.js 기반)
실행 방식: 봇 스크립트가 백그라운드에서 돌면서, 동시에 로컬 웹 서버(예: http://localhost:3000)를 띄워 대표님이 눈으로 보고 제어할 수 있는 [로컬 대시보드 UI]를 제공합니다.
DB 연동: 메인 웹앱과 동일한 데이터베이스(DB) 주소를 바라보도록 설정. 단, 봇은 데이터를 '생성(Insert) 및 업데이트'하는 역할에 집중합니다. (의뢰자 식별: user_id = 'bot')
2. [섹션 0] 로컬 대시보드 및 제어판 (Local Control Panel) 🎛️
오토마케터의 상태를 모니터링하고, 옵션을 세밀하게 조절하는 로컬 전용 UI입니다. 무거운 프론트엔드 프레임워크를 철저히 배제하고 가장 가벼운 형태로 구축합니다.
2.1 스케줄링 제어 및 누적 리스트
[ 🟢 Auto 모드 ]: 매일 2회 정해진 시간에 스크립트가 도는 기본 상태.
누적 수집 리스트: 봇(user_id='bot')이 수집하고 분석한 영상만 최신순으로 정렬하여 보여주는 화면.
2.2 영상 수집 옵션 설정 (Youtube Scraping Options)
[ N ]: 전체 인기 영상 수집 개수
[ M ]: 카테고리별 수집 개수
[ X ]: 채널 다양성 쿨타임 (기본 7일)
2.3 🌟 커뮤니티 바이럴 옵션 설정 (Community Targeting Options)
커뮤니티 자동 댓글을 위해 타겟팅할 대상을 대시보드에서 직접 입력/관리합니다.
타겟 URL 리스트 관리: 매일 순회할 커뮤니티 게시판 URL 등록. (초기 타겟: fmkorea.com 집중)
검색 키워드 관리: 타겟 게시글을 찾기 위한 키워드 풀(Pool) 관리. (예: 가짜뉴스, 영상 + 어그로)
검색 기준일: [ 최근 24시간 이내의 게시글만 스캔 ]
댓글 봇 현황판: 실시간 진행 상태([크롤링 완료] → [LLM 생성 완료] → [댓글 작성 완료]) 표시.
3. [섹션 1] 핵심: 2-Track 영상 자동 수집 및 분석 🚀
기존 메인 앱에 구현된 수집/분석 코드를 **100% 그대로 재사용(HTTP 호출)**하되, 타겟을 찾는 '탐색 로직'만 정교한 규칙을 따릅니다.
3.1 수집 대상 및 4대 절대 원칙
[Type 1] 전체 트렌드 상위 N개 / [Type 2] 카테고리별 최고 조회수 상위 M개
조건 A: 업로드된 지 12시간 이내인 영상만.
조건 B: DB에 이미 분석된 영상은 무조건 패스.
조건 C: Type 1과 Type 2 간의 중복 패스.
조건 D: 최근 [ X ]일 이내 분석된 이력이 있는 채널의 새 영상은 패스 (다양성 확보).
4. [섹션 2] B2B/B2C 댓글 영업 자동화 (100% 무인화) 🗣️
어그로필터의 가장 핵심적인 홍보 수단입니다. **"최소 비용(일일 무료 크레딧 한도) 내에서 최대 효율"**을 뽑아내는 것을 제1원칙으로 설계합니다.
4.1 타겟 대상 및 비용 최적화 전략
댓글 영업 타겟: 봇이 수집한 영상뿐만 아니라, 일반 유저가 검색해서 새롭게 분석 완료된 모든 신규 영상을 댓글 영업 대상으로 삼습니다.
비용 최소화: Gemini 2.5 Flash의 일일 무료 한도를 넘지 않도록 프롬프트를 최적화합니다.
지연 스케줄링 (Anti-Spam): 봇이 내부 큐(Queue)에 쌓아둔 뒤 1~2분의 랜덤 간격으로 천천히 댓글을 작성합니다.
4.2 유튜브 자동 댓글 (점수별 다변화 템플릿)
작성 방식 (API 심사 회피): YouTube Data API v3의 '댓글 쓰기' 권한 심사를 회피하기 위해, 유튜브 댓글 작성 역시 Playwright를 이용한 로컬 세션 조종 방식으로 수행합니다.
링크(URL) 정책: 템플릿의 {link}는 채널 홈이 아닌, 즉각적인 충격을 줄 수 있는 **영상 분석 결과 페이지 URL (/result/{videoId})**로 고정합니다.
템플릿 샘플 (점수별 다변화):
[F급 호구]: "🚨 [어그로필터 팩트체크] 주의! 이 영상의 팩트 신뢰도는 20점입니다... {link}"
[C급 팔랑귀]: "⚠️ [어그로필터 팩트체크] 신뢰도 45점. 자극적인 과장이 일부 포함되어 있으니... {link}"
[S급 오라클]: "💎 [어그로필터 팩트체크] 신뢰도 95점! 썸네일과 팩트가 완벽하게 일치하는... {link}"
4.3 커뮤니티 타겟팅 자동 댓글 (초기 에펨코리아 집중)
대시보드에 등록된 URL과 키워드를 기반으로 커뮤니티를 매일 순회합니다. 여러 커뮤니티를 동시에 개발하여 로직이 꼬이는 것을 방지하기 위해 초기 파이프라인은 '에펨코리아(fmkorea.com)' 단일 타겟으로 우선 완성합니다.
스캔 및 크롤링: fmkorea.com 지정 게시판에서 키워드로 최근 24시간 내 게시글 검색 및 본문 크롤링.
생성: LLM(Gemini)을 호출하여 본문 문맥에 공감하면서 어그로필터 앱 링크를 추천하는 자연스러운 댓글 텍스트 생성.
실행: Playwright를 이용해 스태프의 기존 크롬 세션으로 접근, 1~2분 딜레이를 주며 자동 댓글 작성.
5. [섹션 3] SNS 오피셜 채널: 쇼츠/릴스 무인 자동화 🎬
⚠️ [우선순위 및 진행 안내]
본 섹션은 [섹션 1]과 [섹션 2]의 개발을 100% 완료하고 안정화한 이후에 다시 치밀한 세부 설계에 들어갈 예정입니다. 현재는 초안(Draft) 상태입니다.
5.1 기획 방향성
무료/오픈소스 AI 극대화, 영상미보다는 템플릿 중심의 '자극 요소 극대화' (세부 사항 추후 기획).
6. 기술 구현 지침 (Tech Specs) - ⚠️ 개발자 윈드서퍼 필독
6.1 프로젝트 독립 폴더 및 모노레포 환경 설정
경로: 어그로필터 최상단(Root) 경로 하위에 aggro-marketing-bot 전용 폴더 생성. (npm init, 별도 .env 구성)
배포 무시: Root 경로에 .netlifyignore 설정을 추가하여 봇 코드 Push 시 메인 앱 재배포 방지.
6.2 데이터베이스(DB) 확장 요구사항
bot_community_targets: 커뮤니티 URL, 검색 키워드, 활성화 상태 관리 테이블.
bot_comment_logs: 타겟 영상/게시글 ID, 생성된 텍스트, 업로드 상태(Queue/Done/Error) 관리 테이블.
6.3 로컬 대시보드 서버 스택 (초경량화)
결정 스택: Express + 순수 HTML/JS (또는 EJS 템플릿 엔진)
로컬에서 돌아가는 가벼운 봇 제어판이므로, 별도의 빌드 과정(Webpack)이나 무거운 프론트엔드 프레임워크(Next.js, React 등)는 절대 사용하지 마십시오. 기존 메인 앱 어드민에 통합하는 것 역시 금지합니다. 오직 독립된 가벼운 Express 서버 하나만 띄워 화면을 구성하십시오.
6.4 🌟 개발 진행 순서 (Implementation Priority)
프로젝트의 안정적인 완성을 위해 반드시 아래 순서대로 개발을 진행하십시오.
[1순위] 수집 엔진 개발 (섹션 1): N, M, X 옵션을 파라미터로 받아 작동하는 2-Track 유튜브 수집 및 분석 DB 적재 백그라운드 엔진 코어 완성.
[2순위] 대시보드 UI 연동 (섹션 0): Express 서버를 띄워 투박하더라도 수집 엔진의 파라미터를 제어하고, 누적된 DB 리스트를 눈으로 확인할 수 있는 로컬 웹 UI 완성.
[3순위] 댓글 영업 자동화 (섹션 2): 위 1, 2순위가 완벽히 동작하여 데이터가 쌓이면, 이를 바탕으로 유튜브 및 커뮤니티(에펨코리아 우선)에 Playwright로 댓글을 다는 자동화 큐(Queue) 시스템 구축.
