⚙️ 기획서: 어그로필터 오토마케터 (AutoMarketer)
Project: AggroFilter Independent Local System (Aggro Marketing Bot)
Target: Back-end / Node.js Developer
Version: Final Merged 6.1 (Section 3 Postponed & Concept Refined)
1. 개요 및 시스템 분리 배경 (Overview)
이 시스템은 어그로필터 메인 서비스와 철저히 분리되어, 대표님의 로컬 PC(또는 소형 서버)에서 단독으로 돌아가는 **'자동화 봇(Bot) 및 제어판'**입니다.
1.1 아키텍처 구조 (Architecture)
위치: 메인 프로젝트 최상단(Root) 하위에 독립 폴더(aggro-marketing-bot)로 생성. (Node.js 기반)
실행 방식: 봇 스크립트가 백그라운드에서 돌면서, 동시에 로컬 웹 서버(예: http://localhost:3000)를 띄워 대표님이 눈으로 보고 제어할 수 있는 [로컬 대시보드 UI]를 제공합니다.
DB 연동: 메인 웹앱과 동일한 데이터베이스(DB) 주소를 바라보도록 설정. 단, 봇은 데이터를 '생성(Insert) 및 업데이트'하는 역할에 집중합니다. (의뢰자 식별: user_id = 'bot')
2. [섹션 0] 로컬 대시보드 및 제어판 (Local Control Panel) 🎛️
오토마케터의 상태를 모니터링하고, 옵션을 세밀하게 조절하는 로컬 전용 UI입니다.
2.1 스케줄링 제어 및 누적 리스트
[ 🟢 Auto 모드 ]: 매일 2회 정해진 시간에 스크립트가 도는 기본 상태.
누적 수집 리스트: 봇(user_id='bot')이 수집하고 분석한 영상만 최신순으로 정렬하여 보여주는 화면.
2.2 영상 수집 옵션 설정 (Youtube Scraping Options)
[ N ]: 전체 인기 영상 수집 개수
[ M ]: 카테고리별 수집 개수
[ X ]: 채널 다양성 쿨타임 (기본 7일)
2.3 🌟 커뮤니티 바이럴 옵션 설정 (Community Targeting Options)
커뮤니티 자동 댓글을 위해 타겟팅할 대상을 대시보드에서 직접 입력/관리합니다.
타겟 URL 리스트 관리: 매일 순회할 커뮤니티 게시판 URL 등록/수정/삭제. (예: fmkorea.com/ib, cafe.naver.com/특정게시판)
검색 키워드 관리: 타겟 게시글을 찾기 위한 키워드 풀(Pool) 관리.
단일 키워드 예시: 가짜뉴스, 사기꾼
조합 키워드 예시: 영상 + 어그로, 유튜브 + 낚시
검색 기준일: [ 최근 24시간 이내의 게시글만 스캔 ] (대시보드 상단에 고정 안내 텍스트 노출)
댓글 봇 현황판: 오늘 스캔한 게시글 리스트와 함께 실시간 진행 상태([크롤링 완료] → [LLM 생성 완료] → [댓글 작성 완료]) 표시.
3. [섹션 1] 핵심: 2-Track 영상 자동 수집 및 분석 🚀
기존 메인 앱에 구현된 수집/분석 코드를 **100% 그대로 재사용(호출)**하되, 타겟을 찾는 '탐색 로직'만 정교한 규칙을 따릅니다.
3.1 수집 대상 및 4대 절대 원칙
[Type 1] 전체 트렌드 상위 N개 / [Type 2] 카테고리별 최고 조회수 상위 M개
조건 A: 업로드된 지 12시간 이내인 영상만.
조건 B: DB에 이미 분석된 영상은 무조건 패스.
조건 C: Type 1과 Type 2 간의 중복 패스.
조건 D: 최근 [ X ]일 이내 분석된 이력이 있는 채널의 새 영상은 패스 (다양성 확보).
4. [섹션 2] B2B/B2C 댓글 영업 자동화 (100% 무인화) 🗣️
어그로필터의 가장 핵심적인 홍보 수단입니다. **"최소 비용(일일 무료 크레딧 한도) 내에서 최대 효율"**을 뽑아내는 것을 제1원칙으로 설계합니다.
4.1 타겟 대상 및 비용 최적화 전략
댓글 영업 타겟: 봇이 수집한 영상뿐만 아니라, 일반 유저가 검색해서 새롭게 분석 완료된 모든 신규 영상을 댓글 영업 대상으로 삼습니다.
비용 최소화 (무료 크레딧 극대화): Gemini 2.5 Flash의 일일 무료 한도를 넘지 않도록, 댓글 생성용 프롬프트는 최대한 가볍게 최적화하며 불필요한 LLM 호출은 제한합니다.
지연 스케줄링 (Anti-Spam): 차단을 막기 위해 한 번에 달지 않고, 봇이 내부 큐(Queue)에 쌓아둔 뒤 1~2분의 랜덤 간격으로 천천히 댓글을 작성합니다.
4.2 유튜브 자동 댓글 (점수별 다변화 템플릿)
LLM을 활용해 텍스트를 다변화하되, 영상의 등급(S~F)에 따라 템플릿의 성격과 멘트를 완전히 다르게 구성합니다. 템플릿 DB를 늘릴수록 자동화 안정성이 올라갑니다.
[F급 호구] 위험 템플릿 샘플:"🚨 [어그로필터 팩트체크] 주의! 이 영상의 팩트 신뢰도는 20점입니다. 썸네일 내용과 실제 팩트가 심각하게 다릅니다. 시간 낭비하지 마시고 상세 리포트를 확인하세요: {link}"
[C급 팔랑귀] 주의 템플릿 샘플:"⚠️ [어그로필터 팩트체크] 신뢰도 45점. 자극적인 과장이 일부 포함되어 있으니 필터링해서 시청하시길 권장합니다. 분석 결과: {link}"
[S급 오라클] 청정 템플릿 샘플:"💎 [어그로필터 팩트체크] 신뢰도 95점! 썸네일과 실제 팩트가 완벽하게 일치하는 귀한 클린 영상입니다. 이런 유튜버가 흥해야 합니다. 인증 리포트: {link}"
4.3 커뮤니티 타겟팅 자동 댓글
대시보드에 등록된 URL과 키워드를 기반으로 커뮤니티를 매일 순회합니다.
스캔 및 크롤링: 대시보드에 세팅된 URL(예: 맘카페)에서 [가짜뉴스], [유튜브 + 낚시] 등의 키워드로 최근 24시간 내 게시글을 검색 및 본문 크롤링.
생성: LLM(Gemini)을 호출하여 본문 문맥에 공감하면서 어그로필터 앱 링크를 추천하는 자연스러운 댓글 텍스트 생성.
실행: Playwright를 이용해 스태프의 기존 크롬 세션으로 접근, 1~2분 딜레이를 주며 자동 댓글 작성 후 대시보드 현황판에 [작성 완료] 업데이트.
5. [섹션 3] SNS 오피셜 채널: 쇼츠/릴스 무인 자동화 🎬
⚠️ [우선순위 및 진행 안내]
본 섹션(쇼츠/릴스 무인 자동화)은 [섹션 1]과 [섹션 2]의 개발을 100% 완료하고 안정화한 이후에 다시 치밀한 세부 설계에 들어갈 예정입니다. 현재는 초안(Draft) 상태입니다.
5.1 기획 방향성 (추후 아이디에이션 및 설계 필요)
무료/오픈소스 AI 극대화: 값비싼 유료 영상 렌더링 API 사용을 배제하고, 가능한 일일 무료 크레딧과 **오픈소스 AI 도구(FFmpeg, 오픈소스 TTS/STT 등)**를 조합하여 비용을 0원에 가깝게 수렴시켜야 합니다.
LLM의 선택과 집중: 불필요한 영역은 하드코딩 템플릿으로 처리하고, **'가장 중요한 핵심 대본(Script) 및 어그로성 카피'**를 뽑아내는 데에만 LLM(Gemini)의 역량을 집중합니다.
영상미 < 자극 요소 극대화: 고품질의 화려한 영상미를 추구하기보다, 우리가 가진 콘텐츠 본연의 **'자극 요소(썸네일 낚시와 팩트의 괴리감)'**를 어떻게 효과적으로 노출할지가 핵심입니다.
템플릿 다변화 아이디에이션: 이 자극 요소를 가장 잘 살릴 수 있는 다양한 맞춤형 영상 템플릿 생성 아이디어를 앞으로 팀 내에서 지속적으로 모아야 합니다. (예: 뉴스데스크 고발 포맷, 게임 스탯 비교 포맷 등)
5.2 프로세스 초안 (Draft)
대본 및 에셋 생성: '가장 어그로가 심한 빌런 TOP 3' 추출 → LLM 1분 숏폼 대본 작성 → 시각 에셋(신뢰도 그래프, 도장) 생성.
영상 자동 조립: TTS 음성 합성 + Node.js FFmpeg 영상/자막 합성 (.mp4 렌더링).
자동 퍼블리싱: YouTube Data API v3, Instagram Graph API를 통한 정식 업로드. (API 한도 초과 시 Playwright 우회 업로드)
6. 기술 구현 지침 (Tech Specs) - ⚠️ 개발자 윈드서퍼 필독
6.1 프로젝트 독립 폴더 및 모노레포 환경 설정
경로: 어그로필터 최상단(Root) 경로 하위에 aggro-marketing-bot 전용 폴더 생성. (npm init, 별도 .env 구성)
배포 무시: Root 경로에 .netlifyignore 설정을 추가하여 봇 코드 Push 시 메인 앱 재배포 방지.
6.2 데이터베이스(DB) 확장 요구사항
오토마케터 구동을 위해 기존 메인 DB(Supabase/Firebase)에 아래 테이블/컬럼을 추가하십시오.
t_community_targets: 커뮤니티 URL, 검색 키워드, 활성화 상태 관리 테이블.
t_comment_logs: 타겟 영상/게시글 ID, 생성된 텍스트, 업로드 상태(Queue/Done/Error) 관리 테이블.
6.3 수집 및 업로드 기술 (Playwright Session Persistence)
자막을 긁어오거나 커뮤니티 자동 댓글, 우회 업로드를 수행할 때 봇으로 차단당하지 않도록, **Playwright for Node.js**를 활용하십시오.
스크립트 실행 시 운영 스태프의 기존 크롬 브라우저 사용자 데이터(User Data Dir)를 그대로 로드하여 캡차를 우회하십시오.
