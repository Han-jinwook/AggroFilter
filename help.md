# 마케터 자동화 구축 프로젝트 가이드
작성일: 2026-02-05 01:36

## 1. 프로젝트 목표
어드민 페이지 내에서 분석된 영상을 바탕으로 마케팅 문구(블로그, SNS 등)를 자동으로 생성하고 관리하는 시스템 구축. 서비스의 안정성을 최우선으로 하며, 모든 변경 사항은 단계별로 검증하며 진행함.

## 2. 핵심 TODO 리스트

### Phase 1: 기반 인프라 재정립 (안정성 확보)
- [ ] **DB 스키마 설계 복구 및 정제**: `t_marketing_materials` 테이블 재정의 (기존 충돌 방지)
- [ ] **API 런타임 표준화**: 새로운 마케팅 관련 모든 API는 `runtime = 'nodejs'` 및 SSL 설정을 기본 적용
- [ ] **기존 데이터 정합성 체크**: `t_analyses` 및 `t_channels`와 연동 시 실제 존재하는 컬럼(f_channel_id 등)만 사용하도록 쿼리 작성

### Phase 2: 마케팅 콘텐츠 생성 로직
- [ ] **LLM 프롬프트 엔지니어링**: 분석 결과(summary, score)를 바탕으로 최적의 마케팅 문구를 뽑아내는 Gemini 프롬프트 고도화
- [ ] **콘텐츠 생성 API 구현**: 단일 분석 아이디를 받아 마케팅 초안을 생성하는 `/api/admin/generate-content` 복구 및 안정화
- [ ] **이미지 공유 기능 연동**: 분석 결과 이미지를 마케팅 콘텐츠에 포함할 수 있는 링크 생성 로직 확인

### Phase 3: 어드민 UI 구현 및 자동화
- [ ] **마케팅 대시보드**: 생성된 마케팅 문구를 한눈에 보고 수정/복사할 수 있는 관리 UI 구축
- [ ] **벌크 생성 기능**: 여러 영상을 선택하여 한꺼번에 마케팅 초안을 만드는 기능
- [ ] **채널별 맞춤 전략**: 채널의 특성(신뢰도, 어그로 지수)에 따라 마케팅 톤앤매너 자동 조절

## 3. 개발 원칙 (실수 방지)
1. **단계별 PR**: 모든 기능은 작은 단위로 쪼개어 `hotfix` 브랜치가 아닌 `feature/marketer-*` 브랜치에서 작업 후 `main`으로 머지.
2. **스키마 검증**: SQL 실행 전 실제 운영 DB의 컬럼명과 타입을 반드시 대조 (to_jsonb fallback 활용 권장).
3. **환경 변수 관리**: Supabase Key 및 DATABASE_URL 설정 누락 여부 매번 확인.
4. **빌드 테스트**: 배포 전 로컬 빌드 혹은 Netlify Deploy Preview에서 모듈 참조 오류(Module not found) 확인.

---
*내일부터 위 순서에 따라 Phase 1부터 차근차근 진행합니다.*
